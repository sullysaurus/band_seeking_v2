<div data-controller="filters">
  <!-- Quick Filters Bar -->
  <div class="bg-white shadow rounded-lg p-4 mb-6">
    <div class="flex flex-wrap gap-3">
      <!-- Common Instruments -->
      <button type="button"
        class="px-4 py-2 rounded-full text-sm font-medium <%= params[:instruments]&.include?('Guitar') ? 'bg-blue-500 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200' %>"
        data-filters-target="tag"
        data-instrument="Guitar"
        data-action="click->filters#toggleInstrument">
        🎸 Guitar
      </button>

      <button type="button"
        class="px-4 py-2 rounded-full text-sm font-medium <%= params[:instruments]&.include?('Bass') ? 'bg-blue-500 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200' %>"
        data-filters-target="tag"
        data-instrument="Bass"
        data-action="click->filters#toggleInstrument">
        🎸 Bass
      </button>

      <button type="button"
        class="px-4 py-2 rounded-full text-sm font-medium <%= params[:instruments]&.include?('Drums') ? 'bg-blue-500 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200' %>"
        data-filters-target="tag"
        data-instrument="Drums"
        data-action="click->filters#toggleInstrument">
        🥁 Drums
      </button>

      <button type="button"
        class="px-4 py-2 rounded-full text-sm font-medium <%= params[:instruments]&.include?('Vocals') ? 'bg-blue-500 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200' %>"
        data-filters-target="tag"
        data-instrument="Vocals"
        data-action="click->filters#toggleInstrument">
        🎤 Vocals
      </button>

      <!-- Divider -->
      <div class="h-8 w-px bg-gray-200"></div>

      <!-- Common Looking For -->
      <button type="button"
        class="px-4 py-2 rounded-full text-sm font-medium <%= params[:looking_for]&.include?('Cover Band') ? 'bg-green-500 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200' %>"
        data-filters-target="tag"
        data-looking-for="Cover Band"
        data-action="click->filters#toggleLookingFor">
        🎵 Cover Band
      </button>

      <button type="button"
        class="px-4 py-2 rounded-full text-sm font-medium <%= params[:looking_for]&.include?('Original Band') ? 'bg-green-500 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200' %>"
        data-filters-target="tag"
        data-looking-for="Original Band"
        data-action="click->filters#toggleLookingFor">
        ✨ Original Band
      </button>

      <!-- Divider -->
      <div class="h-8 w-px bg-gray-200"></div>

      <!-- Experience Level Quick Filters -->
      <button type="button"
        class="px-4 py-2 rounded-full text-sm font-medium <%= params[:experience_level] == 'Intermediate' ? 'bg-purple-500 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200' %>"
        data-filters-target="tag"
        data-experience="Intermediate"
        data-action="click->filters#toggleExperience">
        👍 Intermediate
      </button>

      <button type="button"
        class="px-4 py-2 rounded-full text-sm font-medium <%= params[:experience_level] == 'Advanced' ? 'bg-purple-500 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200' %>"
        data-filters-target="tag"
        data-experience="Advanced"
        data-action="click->filters#toggleExperience">
        ⭐ Advanced
      </button>

      <!-- Toggle Modal Button -->
      <button type="button"
        class="px-4 py-2 rounded-full text-sm font-medium text-gray-700 border border-gray-300 hover:bg-gray-50"
        data-action="click->filters#toggleModal">
        More Filters
        <span class="ml-1">
          <svg class="w-4 h-4 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </span>
      </button>
    </div>
  </div>

  <!-- Modal -->
  <div data-filters-target="modal" class="hidden fixed inset-0 z-50" role="dialog" aria-modal="true">
    <!-- Background backdrop -->
    <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>

    <div class="fixed inset-0 z-50 overflow-y-auto">
      <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
        <div class="relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-2xl sm:p-6">
          <!-- Close button -->
          <div class="absolute right-0 top-0 pr-4 pt-4">
            <button type="button" 
                    class="rounded-md bg-white text-gray-400 hover:text-gray-500" 
                    data-action="filters#closeModal">
              <span class="sr-only">Close</span>
              <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>
          </div>

          <!-- Modal content -->
          <div class="space-y-6">
            <!-- Instruments Section -->
            <div>
              <h3 class="text-lg font-medium text-gray-900 mb-4">Instruments</h3>
              <div class="flex flex-wrap gap-2">
                <% ['Guitar', 'Bass', 'Drums', 'Vocals', 'Piano/Keys', 'Saxophone', 'Trumpet',
                    'Violin', 'Cello', 'Flute', 'Clarinet', 'Trombone', 'Percussion', 
                    'Ukulele', 'Mandolin', 'Banjo', 'Harmonica', 'DJ/Electronic'].each do |instrument| %>
                  <button type="button"
                    class="px-4 py-2 rounded-full text-sm font-medium <%= params[:instruments]&.include?(instrument) ? 'bg-blue-500 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200' %>"
                    data-filters-target="tag"
                    data-instrument="<%= instrument %>"
                    data-action="click->filters#toggleInstrument">
                    <%= instrument %>
                  </button>
                <% end %>
              </div>
            </div>

            <!-- Looking For Section -->
            <div>
              <h3 class="text-lg font-medium text-gray-900 mb-4">Looking For</h3>
              <div class="flex flex-wrap gap-2">
                <% ['Cover Band', 'Original Band', 'Session Work', 'Jamming', 
                    'Open Mic', 'Teaching', 'Learning'].each do |looking_for| %>
                  <button type="button"
                    class="px-4 py-2 rounded-full text-sm font-medium <%= params[:looking_for]&.include?(looking_for) ? 'bg-green-500 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200' %>"
                    data-filters-target="tag"
                    data-looking-for="<%= looking_for %>"
                    data-action="click->filters#toggleLookingFor">
                    <%= looking_for %>
                  </button>
                <% end %>
              </div>
            </div>

            <!-- Experience Level Section -->
            <div>
              <h3 class="text-lg font-medium text-gray-900 mb-4">Experience Level</h3>
              <div class="flex flex-wrap gap-2">
                <% ['Beginner', 'Intermediate', 'Advanced', 'Pro'].each do |level| %>
                  <button type="button"
                    class="px-4 py-2 rounded-full text-sm font-medium <%= params[:experience_level] == level ? 'bg-purple-500 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200' %>"
                    data-filters-target="tag"
                    data-experience="<%= level %>"
                    data-action="click->filters#toggleExperience">
                    <%= level %>
                  </button>
                <% end %>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>